# OWASP Top 10 (2021) - A03

| https://owasp.org/Top10/A03_2021-Injection/
## A03 Injection (인젝션)
웹 애플리케이션 중 가장 많이 알려진 취약점이 인젝션이다.
인젝션은 사용자가 전달하는 데이터(파라미터, 헤더, URL, 쿠키(Cookie), JSON 데이터, XML등 모든 형태)를 신뢰할 수 없는 데이터로 조작해서, 서버 측에서 명령어나 쿼리문의 일부로 인식하게 만들 때 발생하는 취약점이다. 즉 입력 유효성 검사 및 데이터 처리의 부적절한 처리에 대해서 미흡해서 생기는 문제이다.


## 주요 예시
- SQL Injection(SQL 주입) : 데이터베이스 공격을 위해 SQL 쿼리를 주입하는 것으로, 공격자가 데이터베이스를 조작하거나 민감한 정보를 탈취 할 수 있다.
  - 가장 대표적인 인젝션으로 웹 애플리케이션에서 DB에 쿼리시 입력된 데이터의 유효성을 점검하지 않아 생기는 문제이다. 그래서 개발자가 의도치 않은 동적 쿼리를 생성하여 DB 정보를 열람하거나 조작 가능하게 한다.
- Cross-Site Scripting(XSS, 크로스 사이트 스크립팅) : 주로 자바스크립트 기반 브라우저 공격으로, 감염된 웹 페이지를 통해 세션 탈취, 쿠키 도용 또는 사용자에 대한 기타 공격을 수행한다.
- Command-Injection(커맨드 인젝션, 명령 주입) : 공격자가 애플리케이션에서 실행되는 시스템 명령에 악성 명령어를 주입하여 서버를 제어하거나 무단 작업을 수행 할 수 있다.
  - 악성 페이로드를 삽입하여 리버스 쉘을 획득 하여 시스템 자체를 장악 당할 수 있는 강한 취약점이다.
- LDAP Injection (LDAP 삽입) : 공격자가 인증 권한 및 권한 부여에 사용되는 LDAP 쿼리를 조작하여 액세스 권한을 얻는 것이다.
- XML Injection (XML 삽입) : 공격자가 XML 데이터에 악의적인 내용을 삽입하여 애플리케이션 구문 분석 프로세스를 방해하고 엑세스 권한을 얻는 것이다.
- Server-Side Template Injection(SSTI, 서버 측 템플릿 삽입) : 공격자가 서버 측 템플릿에 악성코드를 삽입하여 서버에서 코드를 실행 시킬 수 있는 취약점이다.

## 예방 방법
- 입력 검증 및 정제 : 모든 입력 데이터를 검증하고 정제하여 악의적인 데이터 삽입을 방지해야한다
- 암호화 : 중요한 데이터를 저장 및 전송할 때 암호화를 사용하여 데이터의 안정성을 보장한다
- 보안 헤더 사용 : 웹 애플리케이션에서 적절한 보안 헤더를 사용하여 XSS 공격을 방어한다.
- 웹 방화벽 WAF를 사용한다
- 동적 SQL을 사용하지 않는다
  - 쿼리문 구조를 외부 입력값에 의해 변경되지 않는 API를 사용하도록 시큐어코딩 규칙을 지정해야한다.
  - ORM 프레임워크를 사용하여 안전한 정적 쿼리구조로 SQL문을 수행 할 수 있도록 개발환경을 설정한다.
  - 정적 퀴리문을 사용하도록 제한한다.
  - 만약 동적 쿼리문을 사용해야한다면, 입력값에 대한 검증을 수행한 뒤 사용한다.(클라이언트 서버 양측 입력값에 대해서)
  - 보안 라이브러리 및 프레임워크를 를 사용하여 인젝션 공격에 대비한다.


